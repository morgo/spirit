# Example Spirit Sync Configuration
# Syncs data from MySQL to PostgreSQL with continual replication and checksumming

version: "1.0"

sync:
  name: "mysql-to-postgres-example"
  
  source:
    dsn: "spirit:spirit@tcp(localhost:3306)/mydb"
  
  target:
    type: "postgresql"
    dsn: "postgres://mtocker@localhost:5432/test?sslmode=disable"
  
  projections:
    - name: "users-sync"
      source_table: "users"
      target_table: "users"
      query: "SELECT id, name, email, created_at FROM users"
      primary_key: ["id"]
    
    - name: "orders-sync"
      source_table: "orders"
      target_table: "orders"
      query: "SELECT id, user_id, total, status, created_at FROM orders"
      primary_key: ["id"]
  
  checkpoint:
    table: "_spirit_sync_checkpoint"
    interval: 30s
  
  checksum:
    enabled: true
    interval: 1h
    max_retries: 3
  
  performance:
    threads: 4
    target_chunk_time: 5s
